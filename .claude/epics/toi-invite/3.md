---
name: RSVP System
status: open
created: 2026-02-20T15:25:54Z
updated: 2026-02-20T15:48:31Z
github: https://github.com/Temirlaaan/toi-invite/issues/3
depends_on: [10]
parallel: true
conflicts_with: []
---

# Task: RSVP System

## Description
Implement the RSVP form on the guest invitation page and the backend API for submitting and updating RSVPs. Includes rate limiting and guest name pre-fill for personalized links.

## Acceptance Criteria
- [ ] RSVP form embedded in guest invitation page with fields: attendance status (yes/no/maybe), guest count, optional message
- [ ] Guest name pre-filled when using personalized link (`/e/[slug]/g/[token]`)
- [ ] RSVP submission via server action / API route
- [ ] Guests can update their RSVP (re-submit updates existing record)
- [ ] Confirmation UI shown after successful submission
- [ ] Rate limiting: max 10 RSVP submissions per IP per minute
- [ ] Input validation: guest count 1–20, message max 500 chars, status must be valid enum
- [ ] RSVP data persisted to database (Rsvp model linked to Guest)
- [ ] Anonymous RSVP (via event slug without token): creates Guest record with provided name

## Technical Details
- RSVP form is a client component within the guest page
- Server action: validate input → find/create Guest → upsert Rsvp
- Rate limiting via in-memory store (or Redis if available) — simple IP-based counter
- For personalized links: lookup Guest by token, pre-fill name, link RSVP to existing Guest
- For anonymous access: create Guest record on RSVP submit with provided name
- Form uses shadcn/ui components (RadioGroup for status, NumberInput for count, Textarea for message)
- Success state: show checkmark animation + summary of response

## Dependencies
- [ ] Task 10: Guest invitation page where RSVP form is embedded
- [ ] Task 4: Database schema (Guest, Rsvp models)

## Effort Estimate
- Size: S
- Hours: 8
- Parallel: true — can overlap with Task 5
